{% extends 'base.html.twig' %}

{% block title %}DIY! - Plateforme d'ateliers créatifs
{% endblock %}

{% block body %}

	{% for annonce in annonces %}
		<div class="card" style="width: 18rem;">
			<img src="{{ asset('uploads/images/' ~ annonce.img1)|imagine_filter('square') }}" class="card-img-top" alt="{{annonce.title}}">
			<div class="card-body">
				<h5 class="card-title">{{annonce.title }}</h5>
				<p class="card-text">Catégories :
					{{ annonce.categories }}</p>
				<p class="card-text">{{ annonce.content|u.truncate(100, '...')|raw  }}</p>


				{% if is_granted("ROLE_USER") %}
					{% for favoris in annonce.favoris %}
						{% if favoris.id == app.user.id %}
							<p class="card-text">
								<a href="{{ path('annonces_retrait_favoris', {id: annonce.id}) }}">
									<i class='bx bxs-heart'></i>
								</a>
							</p>
						{% else %}
							<p class="card-text">
								<a href="{{ path('annonces_ajout_favoris', {id: annonce.id}) }}">
									<i class='bx bx-heart'></i>
								</a>
							</p>
						{% endif %}

					{% else %}
						<p class="card-text">
							<a href="{{ path('annonces_ajout_favoris', {id: annonce.id}) }}">
								<i class='bx bx-heart'></i>
							</a>
						</p>
					{% endfor %}
				{% endif %}
				<a href="{{path('annonces_details' , {slug: annonce.slug}) }}" class="btn btn-primary">DIY!</a>
			</div>
		</div>
	{% endfor %}

{% endblock %}
