{% extends 'base.html.twig' %}

{% block title %}DIY! - Plateforme d'ateliers créatifs
{% endblock %}

{% block body %}
	<img src="{{asset('/images-diy/banniere.PNG') }}" class="img-fluid" alt="...">
	<div class="container">
		<div
			class="row">
			<!-- RECHERCHE -->
			<div class="col-lg-2">
				<h3 class="description_title mt-3">
					Filtrer
				</h3>
				{{ parent() }}
			</div>
		</div>
		<!-- FIN RECHERCHE -->
		<!-- APERCU ANNONCES CARDS -->
		<div class="col-lg-10">
			<div class="d-flex flex-row justify-content-center flex-wrap ">
				{% for annonce in annonces %}
					<div class="card col-lg-3 col-md-6 col-sm-12 col-xs-12 text-center m-2">
						<img src="{{ asset('uploads/images/' ~ annonce.img1)|imagine_filter('square') }}" class="card-img-top" alt="{{annonce.title}}">
						<div class="card-body">
							<h5 class="card-title">{{annonce.title }}</h5>
							<p class="card-text-categorie">Catégorie :
								{{ annonce.categories }}
							</p>
							<p class="card-text">
								{{ annonce.content|u.truncate(100, '...')|raw  }}
							</p>
							<p class="card-text text-center">
								<a href="{{path('annonces_details' , {slug: annonce.slug}) }}" class="btn btn-front">
									DIY!
								</a>
								<!-- AJOUT AU FAVORIS -->
								{% if is_granted("ROLE_USER") %}
									{% for favoris in annonce.favoris %}
										{% if favoris.id == app.user.id %}
											<a href="{{ path('annonces_retrait_favoris', {id: annonce.id}) }}">
												<i class="far fa-heart"></i>
											</a>
										{% else %}
											<a href="{{ path('annonces_ajout_favoris', {id: annonce.id}) }}">
												<i class="fas fa-heart"></i>
											</a>
										{% endif %}
									{% else %}
										<a href="{{ path('annonces_ajout_favoris', {id: annonce.id}) }}">
											<i class="fas fa-heart"></i>
										</a>
									{% endfor %}
								{% endif %}
							</p>
							<!-- FIN AJOUT AU FAVORIS -->
						</div>
					</div>
				{% endfor %}
			</div>
		</div>
		<!-- FIN APERCU ANNONCES CARDS -->
	</div>
</div>


<div class="d-flex justify-content-center">
	{% do annonces.setPageRange(2) %}{{ knp_pagination_render(annonces, 'diy/pagination.html.twig') }}
</div>{% endblock %}
